#! /usr/bin/env python

import nav_goal.movebase_client
import rospy
import sys

if __name__ == '__main__':
    response = nav_goal.movebase_client.init_gps_node(sys.argv)

    if response != 'Failure':
        try:
            lat, long = response
            x, y = nav_goal.movebase_client.gps_to_map(lat, long)
            rospy.loginfo("Moving to map location")
            result = nav_goal.movebase_client.movebase_client(x, y, 0, "map")
            rospy.loginfo(result)
        except:
            rospy.logerr("Error - Navigation failed for unknown reasons. Exiting...")
            rospy.signal_shutdown("Error - Navigation failed for unknown reasons. Exiting...")
